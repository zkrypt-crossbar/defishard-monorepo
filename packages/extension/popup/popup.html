<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeFiShard Wallet</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="defishard-popup">
        <!-- Header -->
        <div class="header">
            <div class="logo-section">
                <img src="../assets/icons/defishard-logo.svg" alt="DeFiShard" class="logo">
                <div class="title-section">
                    <h1 class="title">DeFiShard</h1>
                    <p class="subtitle">Secure MPC Wallet</p>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content" id="main-content">
            <!-- Welcome Screen -->
            <div class="screen" id="welcome-screen">
                <div class="welcome-content">
                    <div class="welcome-icon">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                            <path d="M2 17l10 5 10-5" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                            <path d="M2 12l10 5 10-5" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        </svg>
                    </div>
                    <h2 class="welcome-title">Welcome to DeFiShard</h2>
                    <p class="welcome-description">
                        Create a secure distributed wallet using Multi-Party Computation (MPC) technology.
                    </p>
                    <button class="primary-btn create-wallet-btn" id="create-wallet-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 5v14M5 12h14" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        </svg>
                        Create DeFiShard Wallet
                    </button>
                </div>
            </div>

            <!-- Wallet Creation Screen -->
            <div class="screen hidden" id="wallet-creation-screen">
                <div class="creation-content">


                    <!-- Step 1: Wallet Configuration -->
                    <div class="step-content" id="step-1-content">
                        <h3 class="step-title">Configure Your Wallet</h3>
                        <p class="step-description">
                            Set up your 2-of-2 distributed wallet. You'll need 2 devices to complete the setup.
                        </p>
                        
                        <div class="form-group">
                            <label for="wallet-name" class="form-label">Wallet Name</label>
                            <input 
                                type="text" 
                                id="wallet-name" 
                                class="form-input" 
                                placeholder="Enter wallet name (e.g., My DeFi Wallet)"
                                maxlength="50"
                            >
                            <div class="form-help">Choose a memorable name for your wallet</div>
                        </div>

                        <div class="form-group">
                            <label for="wallet-password" class="form-label">Password</label>
                            <input 
                                type="password" 
                                id="wallet-password" 
                                class="form-input" 
                                placeholder="Enter password to encrypt keyshare"
                            >
                            <div class="form-help">Password to secure your keyshare</div>
                        </div>

                        <div class="form-group">
                            <label for="confirm-password" class="form-label">Confirm Password</label>
                            <input 
                                type="password" 
                                id="confirm-password" 
                                class="form-input" 
                                placeholder="Confirm your password"
                            >
                            <div class="form-help">Re-enter your password to confirm</div>
                        </div>



                        <div class="step-actions">
                            <button class="primary-btn" id="next-to-share" disabled>
                                Create Wallet
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Step 2: QR Code Sharing -->
                    <div class="step-content hidden" id="step-2-content">
                        <div class="waiting-section">
                            <!-- Status Section -->
                            <div class="status-section">
                                <h3 class="status-title">Waiting for other party</h3>
                                <div class="party-counter">
                                    <span class="counter-text">1/2 parties connected</span>
                                </div>
                            </div>
                            
                            <!-- QR Code Section -->
                            <div class="qr-section-main">
                                <div class="qr-container-xl" id="qr-container">
                                    <div class="qr-placeholder">
                                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M3 3h6v6H3zM15 3h6v6h-6zM3 15h6v6H3zM15 15h6v6h-6z" stroke="currentColor" strokeWidth="2"/>
                                        </svg>
                                        <p>Generating QR code...</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Copy Button Section -->
                            <div class="copy-section">
                                <button class="copy-data-btn" id="copy-data-btn">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 4v12a2 2 0 002 2h8a2 2 0 002-2V7.242a2 2 0 00-.602-1.43L16.083 2.57A2 2 0 0014.685 2H10a2 2 0 00-2 2z" stroke="currentColor" strokeWidth="2"/>
                                        <path d="M16 18v2a2 2 0 01-2 2H6a2 2 0 01-2-2V9a2 2 0 012-2h2" stroke="currentColor" strokeWidth="2"/>
                                    </svg>
                                    Copy QR Data
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Key Generation -->
                    <div class="step-content hidden" id="step-3-content">
                        <h3 class="step-title">Generating Your Wallet</h3>
                        <p class="step-description">
                            Creating your distributed keys across all connected devices. This process is secure and cannot be interrupted.
                        </p>
                        
                        <div class="keygen-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                            <div class="progress-text" id="progress-text">Initializing...</div>
                        </div>

                        <div class="keygen-status">
                            <div class="status-item" id="status-round">
                                <span class="status-icon">üîÑ</span>
                                <span class="status-text">Round 0/4: Initializing</span>
                            </div>
                            <div class="status-item" id="status-connections">
                                <span class="status-icon">üîó</span>
                                <span class="status-text">2/2 devices connected</span>
                            </div>
                            <div class="status-item" id="status-security">
                                <span class="status-icon">üõ°Ô∏è</span>
                                <span class="status-text">Verifying cryptographic operations</span>
                            </div>
                        </div>

                        <div class="keygen-timer">
                            <span class="timer-label">Estimated time remaining:</span>
                            <span class="timer-value" id="timer-value">--:--</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Wallet Created Success Screen -->
            <div class="screen hidden" id="success-screen">
                <div class="success-content">
                    <div class="success-icon">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 6L9 17l-5-5" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        </svg>
                    </div>
                    <h2 class="success-title">Wallet Created Successfully!</h2>
                    <p class="success-description">
                        Your DeFiShard wallet is ready to use. The keys are securely distributed across your devices.
                    </p>
                    
                    <div class="wallet-summary">
                        <div class="summary-item">
                            <span class="summary-label">Wallet Name:</span>
                            <span class="summary-value" id="final-wallet-name">-</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Security Level:</span>
                            <span class="summary-value" id="final-security-level">-</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Public Key:</span>
                            <span class="summary-value" id="final-public-key">-</span>
                        </div>
                    </div>

                    <div class="success-actions">
                        <button class="primary-btn" id="view-wallet-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" strokeWidth="2"/>
                                <circle cx="12" cy="12" r="3" stroke="currentColor" strokeWidth="2"/>
                            </svg>
                            View Wallet
                        </button>
                        <button class="secondary-btn" id="create-another-btn">
                            Create Another Wallet
                        </button>
                    </div>
                </div>
            </div>
        </div>


    </div>

    <script src="../assets/qrcode.min.js"></script>
    <script src="popup.js"></script>
</body>
</html>
